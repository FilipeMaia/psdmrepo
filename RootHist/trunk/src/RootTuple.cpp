//------------------------------------------------------------------------
// File and Version Information:
// 	$Id$
//
// Description:
//	Class RootTuple...
//
// Author List:
//      Mikhail S. Dubrovin
//
//------------------------------------------------------------------------

//-----------------
// Class Headers --
//-----------------

#include "RootHist/RootTuple.h"
#include "RootHist/RootColumn.h"


//-----------------
// C/C++ Headers --
//-----------------
#include <sstream> // for int to string conversion using std::stringstream 
#include <iomanip> // for formatted conversion std::setw(3) , std::setfill

using std::cout;
using std::endl;

//		----------------------------------------
// 		-- Public Function Member Definitions --
//		----------------------------------------

namespace RootHist {

int RootTuple::s_number_of_columns = 0;

RootTuple::RootTuple ( const std::string &name, const std::string &title )
 : PSHist::Tuple()
{
  m_tuple = new TTree( name.c_str(), title.c_str() ); 
  cout << "RootTuple::RootTuple(...) - Created the tuple " << name << " with title=" << title << endl;
}


PSHist::Column* RootTuple::column( const std::string &name, void* address, const std::string &columnlist ) {
  // cout << "RootTuple::column(...) - create the RootColumn " << name << " with list of parameters: " << columnlist.c_str() << endl;
  return new RootColumn (this, name, address, columnlist);
}

PSHist::Column* RootTuple::column( void* address, const std::string &columnlist ) {
  // cout << "RootTuple::column(...) - create the RootColumn " << name << " with list of parameters: " << columnlist.c_str() << endl;
  std::string name = RootTuple::getAutoGeneratedName();
  return new RootColumn (this, name, address, columnlist);
}


  //PSHist::Column* RootTuple::column1i( const std::string &name ) {
  //  return new RootColumn (this, name);
  //}


void RootTuple::print( std::ostream &o ) const { 
  o << "RootTuple" << endl;
}


void RootTuple::fill() {
  m_tuple->Fill();
} 


void RootTuple::reset() {
  m_tuple->Reset();
}


std::string RootTuple::getAutoGeneratedName() {
  s_number_of_columns++;
  //cout << "RootTuple::getAutoGeneratedName() : s_number_of_columns = " << s_number_of_columns << endl;  
  std::stringstream stream_name;
  stream_name << "C_N" << std::setw(4) << std::setfill('0') << s_number_of_columns;
  return stream_name.str();
}



} // namespace RootHist
